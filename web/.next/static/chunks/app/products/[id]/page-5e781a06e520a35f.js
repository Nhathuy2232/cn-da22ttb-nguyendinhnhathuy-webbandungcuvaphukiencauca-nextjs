(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[403],{63:(e,s,t)=>{"use strict";var a=t(7260);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},228:(e,s,t)=>{"use strict";function a(e){return Math.round("string"==typeof e?parseFloat(e):e).toLocaleString("vi-VN")+"₫"}t.d(s,{$:()=>a})},344:(e,s,t)=>{"use strict";t.d(s,{u:()=>l});let a=t(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:4000/api";class r{getAuthToken(){return localStorage.getItem("accessToken")}async request(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{requiresAuth:t=!1,headers:a={},...r}=s,l={"Content-Type":"application/json",...a};if(t){let e=this.getAuthToken();e&&(l.Authorization="Bearer ".concat(e))}let n=await fetch("".concat(this.baseUrl).concat(e),{...r,headers:l});if(!n.ok){let e=await n.json().catch(()=>({success:!1,message:"An error occurred"}));throw 401===n.status&&localStorage.removeItem("accessToken"),Error(e.message||"HTTP ".concat(n.status))}return n.json()}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async login(e){var s;let t=await this.request("/auth/login",{method:"POST",body:JSON.stringify(e)});return(null==(s=t.data)?void 0:s.accessToken)&&localStorage.setItem("accessToken",t.data.accessToken),t}async logout(){let e=await this.request("/auth/logout",{method:"POST",requiresAuth:!0});return localStorage.removeItem("accessToken"),e}async getMe(){return this.request("/auth/me",{requiresAuth:!0})}async getProducts(e){let s=new URLSearchParams;(null==e?void 0:e.search)&&s.set("search",e.search),(null==e?void 0:e.category)&&s.set("category",e.category),(null==e?void 0:e.page)&&s.set("page",e.page.toString()),(null==e?void 0:e.limit)&&s.set("limit",e.limit.toString());let t=s.toString();return this.request("/products".concat(t?"?".concat(t):""))}async getProduct(e){return this.request("/products/".concat(e))}async getCategories(){return this.request("/categories")}async getCategory(e){return this.request("/categories/".concat(e))}async getCart(){return this.request("/cart",{requiresAuth:!0})}async addToCart(e){return this.request("/cart",{method:"POST",body:JSON.stringify(e),requiresAuth:!0})}async updateCartItem(e,s){return this.request("/cart",{method:"PUT",body:JSON.stringify({product_id:e,quantity:s}),requiresAuth:!0})}async removeCartItem(e){return this.request("/cart/".concat(e),{method:"DELETE",requiresAuth:!0})}async clearCart(){return this.request("/cart",{method:"DELETE",requiresAuth:!0})}async createOrder(e){return this.request("/orders",{method:"POST",body:JSON.stringify(e),requiresAuth:!0})}async getOrders(){return this.request("/orders",{requiresAuth:!0})}async getOrder(e){return this.request("/orders/".concat(e),{requiresAuth:!0})}constructor(e){this.baseUrl=e}}let l=new r(a)},512:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},1921:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>k});var a=t(5155),r=t(2115),l=t(63),n=t(1847);let i=(0,n.A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var c=t(7125),d=t(6191),o=t(512);let h=(0,n.A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);var m=t(6398),x=t(7910);let u=(0,n.A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var g=t(8892),p=t(9300);function y(e){let{productId:s}=e,{user:t}=(0,p.A)(),[l,n]=(0,r.useState)([]),[i,c]=(0,r.useState)(null),[d,o]=(0,r.useState)(null),[h,m]=(0,r.useState)(!1),[x,u]=(0,r.useState)(5),[g,y]=(0,r.useState)(""),[j,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f()},[s]),(0,r.useEffect)(()=>{t&&v()},[s,t]);let f=async()=>{try{let e=await fetch("http://localhost:4000/api/reviews/product/".concat(s)),t=await e.json();t.success&&(n(t.data.reviews),c(t.data.stats))}catch(e){console.error("Lỗi tải đ\xe1nh gi\xe1:",e)}},v=async()=>{try{let e=localStorage.getItem("accessToken"),t=await fetch("http://localhost:4000/api/reviews/my-review/".concat(s),{headers:{Authorization:"Bearer ".concat(e)}}),a=await t.json();a.success&&a.data&&o(a.data)}catch(e){console.error("Lỗi tải đ\xe1nh gi\xe1 của t\xf4i:",e)}},N=async e=>{if(e.preventDefault(),!t)return void alert("Vui l\xf2ng đăng nhập để đ\xe1nh gi\xe1");b(!0);try{let e=localStorage.getItem("accessToken"),t=await fetch("http://localhost:4000/api/reviews",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({product_id:s,rating:x,comment:g})}),a=await t.json();a.success?(alert("Đ\xe1nh gi\xe1 th\xe0nh c\xf4ng!"),m(!1),y(""),u(5),f(),v()):alert(a.message||"C\xf3 lỗi xảy ra")}catch(e){console.error("Lỗi gửi đ\xe1nh gi\xe1:",e),alert("C\xf3 lỗi xảy ra")}finally{b(!1)}},w=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2?arguments[2]:void 0;return(0,a.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(r=>(0,a.jsx)("button",{type:"button",onClick:()=>t&&t(r),disabled:!s,className:"text-2xl ".concat(s?"cursor-pointer hover:scale-110 transition-transform":""," ").concat(r<=e?"text-yellow-400":"text-gray-300"),children:"★"},r))})};return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Đ\xe1nh gi\xe1 sản phẩm"}),i&&(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 mb-8 pb-8 border-b",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-5xl font-bold mb-2",children:Number(i.average_rating||0).toFixed(1)}),(0,a.jsx)("div",{className:"flex justify-center mb-2",children:w(Math.round(Number(i.average_rating||0)))}),(0,a.jsxs)("div",{className:"text-gray-600",children:[i.total_reviews," đ\xe1nh gi\xe1"]})]}),(0,a.jsx)("div",{className:"space-y-2",children:[5,4,3,2,1].map(e=>{var s;return(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("span",{className:"text-sm w-12",children:[e," sao"]}),(0,a.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-3",children:(0,a.jsx)("div",{className:"bg-yellow-400 h-3 rounded-full transition-all",style:{width:"".concat((s=i["rating_".concat(e)],i&&0!==i.total_reviews?s/i.total_reviews*100:0),"%")}})}),(0,a.jsx)("span",{className:"text-sm w-12 text-right",children:i["rating_".concat(e)]})]},e)})})]}),t&&!d&&!h&&(0,a.jsx)("button",{onClick:()=>m(!0),className:"mb-6 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Viết đ\xe1nh gi\xe1"}),h&&(0,a.jsxs)("form",{onSubmit:N,className:"mb-8 p-6 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"Đ\xe1nh gi\xe1 của bạn"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block mb-2 font-medium",children:"Chất lượng sản phẩm"}),w(x,!0,u)]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block mb-2 font-medium",children:"Nhận x\xe9t"}),(0,a.jsx)("textarea",{value:g,onChange:e=>y(e.target.value),className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:4,placeholder:"Chia sẻ trải nghiệm của bạn về sản phẩm...",required:!0})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{type:"submit",disabled:j,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-colors",children:j?"Đang gửi...":"Gửi đ\xe1nh gi\xe1"}),(0,a.jsx)("button",{type:"button",onClick:()=>m(!1),className:"px-6 py-2 border rounded-lg hover:bg-gray-100 transition-colors",children:"Hủy"})]})]}),d&&(0,a.jsxs)("div",{className:"mb-8 p-6 bg-blue-50 border-l-4 border-blue-600 rounded",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Đ\xe1nh gi\xe1 của bạn"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:new Date(d.created_at).toLocaleDateString("vi-VN")})]}),w(d.rating),(0,a.jsx)("p",{className:"mt-3 text-gray-700",children:d.comment})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg",children:"Tất cả đ\xe1nh gi\xe1"}),0===l.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"Chưa c\xf3 đ\xe1nh gi\xe1 n\xe0o"}):l.map(e=>(0,a.jsxs)("div",{className:"border-b pb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-semibold",children:e.user_name}),w(e.rating)]}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:new Date(e.created_at).toLocaleDateString("vi-VN")})]}),(0,a.jsx)("p",{className:"mt-3 text-gray-700",children:e.comment})]},e.id))]})]})}var j=t(2619),b=t.n(j),f=t(5239),v=t(228);function N(e){let{productId:s,categoryId:t}=e,[l,n]=(0,r.useState)([]),[i,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{d()},[t]);let d=async()=>{try{let e=await fetch("http://localhost:4000/api/products?category=".concat(t,"&limit=4")),a=await e.json();if(a.success&&a.data){let e=(a.data.products||a.data||[]).filter(e=>e.id!==s);n(e.slice(0,4))}}catch(e){console.error("Lỗi tải sản phẩm li\xean quan:",e)}finally{c(!1)}};return i?(0,a.jsxs)("div",{className:"mt-12",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Sản phẩm li\xean quan"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"bg-gray-200 aspect-square rounded-lg mb-3"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]},e))})]}):0===l.length?null:(0,a.jsxs)("div",{className:"mt-12",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Sản phẩm li\xean quan"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:l.map(e=>{var s,t;return(0,a.jsxs)(b(),{href:"/products/".concat(e.id),className:"group bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative aspect-square overflow-hidden",children:[(0,a.jsx)(f.default,{src:e.thumbnail_url||(null==(t=e.images)||null==(s=t.find(e=>e.is_primary))?void 0:s.image_url)||"/images/placeholder.jpg",alt:e.name,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-300"}),0===e.stock_quantity&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,a.jsx)("span",{className:"bg-red-600 text-white px-4 py-2 rounded-lg font-semibold",children:"Hết h\xe0ng"})})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors",children:e.name}),(0,a.jsx)("p",{className:"text-lg font-bold text-blue-600",children:(0,v.$)(e.price)}),e.stock_quantity>0&&e.stock_quantity<10&&(0,a.jsxs)("p",{className:"text-sm text-orange-600 mt-1",children:["Chỉ c\xf2n ",e.stock_quantity," sản phẩm"]})]})]},e.id)})})]})}function w(){return(0,a.jsxs)("div",{className:"mt-12 bg-white rounded-lg shadow-sm p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Ch\xednh s\xe1ch đổi trả"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-blue-600",children:"✓"}),"Điều kiện đổi trả"]}),(0,a.jsxs)("ul",{className:"space-y-2 text-gray-700 ml-6",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-blue-600 mt-1",children:"•"}),(0,a.jsx)("span",{children:"Sản phẩm c\xf2n nguy\xean tem m\xe1c, chưa qua sử dụng"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-blue-600 mt-1",children:"•"}),(0,a.jsx)("span",{children:"C\xf2n đầy đủ hộp, phụ kiện đi k\xe8m"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-blue-600 mt-1",children:"•"}),(0,a.jsx)("span",{children:"C\xf3 h\xf3a đơn mua h\xe0ng từ Fishing Shop"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-blue-600 mt-1",children:"•"}),(0,a.jsx)("span",{children:"Kh\xf4ng bị trầy xước, hư hỏng do người d\xf9ng"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-green-600",children:"⏰"}),"Thời gian đổi trả"]}),(0,a.jsxs)("ul",{className:"space-y-2 text-gray-700 ml-6",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-green-600 mt-1",children:"•"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Đổi h\xe0ng:"})," Trong v\xf2ng 7 ng\xe0y kể từ ng\xe0y nhận h\xe0ng"]})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-green-600 mt-1",children:"•"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Trả h\xe0ng ho\xe0n tiền:"})," Trong v\xf2ng 3 ng\xe0y kể từ ng\xe0y nhận h\xe0ng"]})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-green-600 mt-1",children:"•"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Sản phẩm lỗi do nh\xe0 sản xuất:"})," Đổi trả trong v\xf2ng 30 ng\xe0y"]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-purple-600",children:"\uD83D\uDCCB"}),"Quy tr\xecnh đổi trả"]}),(0,a.jsxs)("div",{className:"space-y-3 ml-6",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-semibold",children:"1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Li\xean hệ với ch\xfang t\xf4i"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Gọi hotline 1900-xxxx hoặc gửi email về support@fishingshop.vn"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-semibold",children:"2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Gửi sản phẩm về shop"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Đ\xf3ng g\xf3i cẩn thận v\xe0 gửi qua đơn vị vận chuyển"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-semibold",children:"3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Kiểm tra sản phẩm"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Ch\xfang t\xf4i sẽ kiểm tra v\xe0 x\xe1c nhận trong v\xf2ng 1-2 ng\xe0y l\xe0m việc"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 text-white rounded-full flex items-center justify-center font-semibold",children:"4"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Đổi h\xe0ng hoặc ho\xe0n tiền"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Gửi sản phẩm mới hoặc ho\xe0n tiền trong 3-5 ng\xe0y l\xe0m việc"})]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-orange-600",children:"\uD83D\uDCB0"}),"Chi ph\xed đổi trả"]}),(0,a.jsxs)("ul",{className:"space-y-2 text-gray-700 ml-6",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-orange-600 mt-1",children:"•"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Lỗi do nh\xe0 sản xuất:"})," Fishing Shop chịu to\xe0n bộ chi ph\xed"]})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-orange-600 mt-1",children:"•"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Đổi size/m\xe0u:"})," Kh\xe1ch h\xe0ng chịu ph\xed vận chuyển 2 chiều"]})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"text-orange-600 mt-1",children:"•"}),(0,a.jsxs)("span",{children:[(0,a.jsx)("strong",{children:"Đổi \xfd kh\xf4ng muốn mua:"})," Kh\xe1ch h\xe0ng chịu ph\xed vận chuyển + 10% ph\xed xử l\xfd"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded",children:[(0,a.jsxs)("h3",{className:"font-semibold text-lg mb-2 flex items-center gap-2",children:[(0,a.jsx)("span",{children:"⚠️"}),"Lưu \xfd quan trọng"]}),(0,a.jsxs)("ul",{className:"space-y-1 text-sm text-gray-700",children:[(0,a.jsx)("li",{children:"• Kh\xf4ng \xe1p dụng đổi trả với sản phẩm đang khuyến m\xe3i/giảm gi\xe1 s\xe2u"}),(0,a.jsx)("li",{children:"• Sản phẩm đ\xe3 qua sử dụng hoặc hư hỏng do người d\xf9ng sẽ kh\xf4ng được đổi trả"}),(0,a.jsx)("li",{children:"• Vui l\xf2ng quay video mở hộp để l\xe0m bằng chứng khi sản phẩm c\xf3 vấn đề"})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Cần hỗ trợ?"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-gray-700",children:[(0,a.jsxs)("p",{children:["\uD83D\uDCDE Hotline: ",(0,a.jsx)("strong",{className:"text-blue-600",children:"1900-xxxx"})," (8:00 - 21:00)"]}),(0,a.jsxs)("p",{children:["✉️ Email: ",(0,a.jsx)("strong",{className:"text-blue-600",children:"support@fishingshop.vn"})]}),(0,a.jsx)("p",{children:"\uD83D\uDCCD Địa chỉ: Tr\xe0 Vinh, Phường 6, Th\xe0nh phố Tr\xe0 Vinh"})]})]})]})]})}function k(){var e,s;let t=(0,l.useParams)(),n=(0,l.useRouter)(),{addItem:j}=(0,g._)(),{isAuthenticated:b}=(0,p.A)(),[f,k]=(0,r.useState)(null),[S,_]=(0,r.useState)(!0),[C,q]=(0,r.useState)(0),[T,A]=(0,r.useState)(1),[E,I]=(0,r.useState)(!1),[P,D]=(0,r.useState)(!1),[L,M]=(0,r.useState)(!1),[O,B]=(0,r.useState)("info"),[V,H]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=async()=>{try{let e=await fetch("http://localhost:4000/api/products/".concat(t.id)),s=await e.json();s.success?k(s.data):console.error("Failed to load product")}catch(e){console.error("Error fetching product:",e)}finally{_(!1)}};t.id&&(e(),z())},[t.id]);let z=async()=>{try{let e=await fetch("http://localhost:4000/api/reviews/product/".concat(t.id)),s=await e.json();s.success&&s.data.stats&&H(s.data.stats)}catch(e){console.error("Error fetching review stats:",e)}};(0,r.useEffect)(()=>{(async()=>{if(b&&f)try{let e=localStorage.getItem("accessToken"),s=await fetch("http://localhost:4000/api/wishlist/check/".concat(f.id),{headers:{Authorization:"Bearer ".concat(e)}}),t=await s.json();t.success&&D(t.data.in_wishlist)}catch(e){console.error("Lỗi kiểm tra wishlist:",e)}})()},[f,b]);let F=async()=>{if(!b)return void n.push("/login");if(f){M(!0);try{let e=localStorage.getItem("accessToken"),s=P?"http://localhost:4000/api/wishlist/".concat(f.id):"http://localhost:4000/api/wishlist",t=await fetch(s,{method:P?"DELETE":"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:P?void 0:JSON.stringify({product_id:f.id})}),a=await t.json();a.success?D(!P):alert(a.message||"C\xf3 lỗi xảy ra")}catch(e){console.error("Lỗi toggle wishlist:",e),alert("C\xf3 lỗi xảy ra")}finally{M(!1)}}},K=async()=>{if(!b)return void n.push("/login");if(f){I(!0);try{await j(f.id,T),alert("Đ\xe3 th\xeam sản phẩm v\xe0o giỏ h\xe0ng!")}catch(e){console.error("Error adding to cart:",e),alert("Kh\xf4ng thể th\xeam v\xe0o giỏ h\xe0ng. Vui l\xf2ng thử lại.")}finally{I(!1)}}},J=e=>{let s=T+e;s>=1&&s<=((null==f?void 0:f.stock_quantity)||0)&&A(s)};if(S)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary-600"})});if(!f)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Kh\xf4ng t\xecm thấy sản phẩm"}),(0,a.jsx)("button",{onClick:()=>n.push("/products"),className:"text-primary-600 hover:text-primary-700",children:"Quay lại danh s\xe1ch sản phẩm"})]})});let U=f.effective_price||f.price,R=f.effective_price&&f.effective_price<f.price,G=f.discount_percentage||0,$=f.images&&f.images.length>0?f.images:[{id:0,image_url:"/images/products/placeholder.jpg",is_primary:!0}];return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsxs)("nav",{className:"text-sm text-gray-600 mb-6",children:[(0,a.jsx)("a",{href:"/",className:"hover:text-primary-600",children:"Trang chủ"}),(0,a.jsx)("span",{className:"mx-2",children:"/"}),(0,a.jsx)("a",{href:"/products",className:"hover:text-primary-600",children:"Sản phẩm"}),(0,a.jsx)("span",{className:"mx-2",children:"/"}),(0,a.jsx)("span",{className:"text-gray-900",children:f.name})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 p-8",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative aspect-square bg-gray-100 rounded-lg overflow-hidden",children:[(0,a.jsx)("img",{src:(null==(e=$[C])?void 0:e.image_url)||$[0].image_url,alt:(null==(s=$[C])?void 0:s.alt_text)||f.name,className:"w-full h-full object-cover",onError:e=>{e.target.src="/images/products/placeholder.jpg"}}),R&&(0,a.jsxs)("div",{className:"absolute top-4 left-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold",children:["-",G,"%"]})]}),$.length>1&&(0,a.jsx)("div",{className:"grid grid-cols-5 gap-2",children:$.map((e,s)=>(0,a.jsx)("button",{onClick:()=>q(s),className:"relative aspect-square rounded-lg overflow-hidden border-2 transition-all ".concat(C===s?"border-primary-600":"border-gray-200 hover:border-gray-300"),children:(0,a.jsx)("img",{src:e.image_url,alt:e.alt_text||"".concat(f.name," - ").concat(s+1),className:"w-full h-full object-cover",onError:e=>{e.target.src="/images/products/placeholder.jpg"}})},e.id||s))})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-2",children:[(0,a.jsx)("span",{className:"text-primary-600 font-medium",children:f.category_name||"Sản phẩm"}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["SKU: ",f.sku]})]}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:f.name}),V&&V.total_reviews>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(e=>(0,a.jsx)(i,{className:"w-5 h-5 ".concat(e<=Math.round(V.average_rating)?"fill-yellow-400 text-yellow-400":"fill-gray-200 text-gray-200")},e))}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["(",Number(V.average_rating||0).toFixed(1)," - ",V.total_reviews," đ\xe1nh gi\xe1)"]})]})]}),(0,a.jsx)("div",{className:"border-t border-b border-gray-200 py-6",children:(0,a.jsxs)("div",{className:"flex items-baseline gap-3",children:[(0,a.jsx)("span",{className:"text-4xl font-bold text-primary-600",children:(0,v.$)(U)}),R&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-lg text-gray-500 line-through",children:(0,v.$)(f.price)}),(0,a.jsxs)("span",{className:"text-red-600 font-semibold",children:["-",G,"%"]})]})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"M\xf4 tả sản phẩm:"}),(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed",children:f.description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"T\xecnh trạng:"}),f.stock_quantity>0?(0,a.jsxs)("span",{className:"text-green-600 font-medium",children:["C\xf2n h\xe0ng (",f.stock_quantity," sản phẩm)"]}):(0,a.jsx)("span",{className:"text-red-600 font-medium",children:"Hết h\xe0ng"})]}),f.stock_quantity>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block font-medium text-gray-900 mb-2",children:"Số lượng:"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>J(-1),disabled:T<=1,className:"w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,a.jsx)(c.A,{className:"w-4 h-4"})}),(0,a.jsx)("input",{type:"number",value:T,onChange:e=>{let s=parseInt(e.target.value);s>=1&&s<=f.stock_quantity&&A(s)},className:"w-20 h-10 text-center border border-gray-300 rounded-lg font-medium",min:"1",max:f.stock_quantity}),(0,a.jsx)("button",{onClick:()=>J(1),disabled:T>=f.stock_quantity,className:"w-10 h-10 rounded-lg border border-gray-300 flex items-center justify-center hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,a.jsx)(d.A,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:K,disabled:0===f.stock_quantity||E,className:"flex-1 bg-primary-600 text-white py-4 rounded-lg font-semibold hover:bg-primary-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:[(0,a.jsx)(o.A,{className:"w-5 h-5"}),E?"Đang th\xeam...":"Th\xeam v\xe0o giỏ h\xe0ng"]}),(0,a.jsx)("button",{onClick:F,disabled:L,className:"w-14 h-14 rounded-lg border-2 flex items-center justify-center transition-all ".concat(P?"bg-red-50 border-red-500 text-red-500":"border-gray-300 hover:border-primary-600 hover:text-primary-600"," disabled:opacity-50"),title:P?"Bỏ y\xeau th\xedch":"Th\xeam v\xe0o y\xeau th\xedch",children:(0,a.jsx)(h,{className:"w-6 h-6 ".concat(P?"fill-current":"")})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 pt-6 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center text-center gap-2",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary-50 flex items-center justify-center",children:(0,a.jsx)(m.A,{className:"w-6 h-6 text-primary-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Miễn ph\xed vận chuyển"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Đơn từ 500k"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center text-center gap-2",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary-50 flex items-center justify-center",children:(0,a.jsx)(x.A,{className:"w-6 h-6 text-primary-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Bảo h\xe0nh ch\xednh h\xe3ng"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"12 th\xe1ng"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center text-center gap-2",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary-50 flex items-center justify-center",children:(0,a.jsx)(u,{className:"w-6 h-6 text-primary-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Đổi trả dễ d\xe0ng"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Trong 7 ng\xe0y"})]})]})]})]})]})}),(0,a.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-lg p-8",children:[(0,a.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,a.jsxs)("nav",{className:"flex gap-8",children:[(0,a.jsx)("button",{onClick:()=>B("info"),className:"pb-4 px-2 border-b-2 font-semibold transition-colors ".concat("info"===O?"border-primary-600 text-primary-600":"border-transparent text-gray-600 hover:text-gray-900"),children:"Th\xf4ng tin chi tiết"}),(0,a.jsxs)("button",{onClick:()=>B("reviews"),className:"pb-4 px-2 border-b-2 font-semibold transition-colors ".concat("reviews"===O?"border-primary-600 text-primary-600":"border-transparent text-gray-600 hover:text-gray-900"),children:["Đ\xe1nh gi\xe1 (",(null==V?void 0:V.total_reviews)||0,")"]}),(0,a.jsx)("button",{onClick:()=>B("policy"),className:"pb-4 px-2 border-b-2 font-semibold transition-colors ".concat("policy"===O?"border-primary-600 text-primary-600":"border-transparent text-gray-600 hover:text-gray-900"),children:"Ch\xednh s\xe1ch đổi trả"})]})}),"info"===O&&(0,a.jsxs)("div",{className:"prose max-w-none",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Th\xf4ng tin sản phẩm"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex py-2 border-b border-gray-100",children:[(0,a.jsx)("span",{className:"w-40 text-gray-600",children:"Danh mục:"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:f.category_name||"Chưa ph\xe2n loại"})]}),(0,a.jsxs)("div",{className:"flex py-2 border-b border-gray-100",children:[(0,a.jsx)("span",{className:"w-40 text-gray-600",children:"M\xe3 sản phẩm:"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:f.sku})]}),(0,a.jsxs)("div",{className:"flex py-2 border-b border-gray-100",children:[(0,a.jsx)("span",{className:"w-40 text-gray-600",children:"Tồn kho:"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:[f.stock_quantity," sản phẩm"]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex py-2 border-b border-gray-100",children:[(0,a.jsx)("span",{className:"w-40 text-gray-600",children:"Thương hiệu:"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"Ch\xednh h\xe3ng"})]}),(0,a.jsxs)("div",{className:"flex py-2 border-b border-gray-100",children:[(0,a.jsx)("span",{className:"w-40 text-gray-600",children:"Bảo h\xe0nh:"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"12 th\xe1ng"})]}),(0,a.jsxs)("div",{className:"flex py-2 border-b border-gray-100",children:[(0,a.jsx)("span",{className:"w-40 text-gray-600",children:"Xuất xứ:"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"Nhật Bản"})]}),(0,a.jsxs)("div",{className:"flex py-2 border-b border-gray-100",children:[(0,a.jsx)("span",{className:"w-40 text-gray-600",children:"Đ\xe1nh gi\xe1:"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:V&&V.total_reviews>0?"".concat(Number(V.average_rating||0).toFixed(1)," ⭐ (").concat(V.total_reviews," người)"):"Chưa c\xf3 đ\xe1nh gi\xe1"})]})]})]}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h4",{className:"text-lg font-bold text-gray-900 mb-3",children:"M\xf4 tả chi tiết"}),(0,a.jsx)("p",{className:"text-gray-600 leading-relaxed mb-4",children:f.description}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600",children:[(0,a.jsx)("li",{children:"Chất liệu cao cấp, bền bỉ theo thời gian"}),(0,a.jsx)("li",{children:"Thiết kế hiện đại, tiện lợi sử dụng"}),(0,a.jsx)("li",{children:"Ph\xf9 hợp cho cả người mới bắt đầu v\xe0 chuy\xean nghiệp"}),(0,a.jsx)("li",{children:"Đạt ti\xeau chuẩn chất lượng quốc tế"}),(0,a.jsx)("li",{children:"Hỗ trợ kỹ thuật v\xe0 bảo h\xe0nh tận t\xe2m"})]})]})]}),"reviews"===O&&(0,a.jsx)(y,{productId:f.id}),"policy"===O&&(0,a.jsx)(w,{})]}),(0,a.jsx)(N,{productId:f.id,categoryId:f.category_id})]})})}},6191:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6398:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])},7125:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},7910:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},8606:(e,s,t)=>{Promise.resolve().then(t.bind(t,1921))},8892:(e,s,t)=>{"use strict";t.d(s,{_:()=>l});var a=t(2115),r=t(344);function l(){let[e,s]=(0,a.useState)(null),[t,l]=(0,a.useState)(!0),[n,i]=(0,a.useState)(null),c=(0,a.useCallback)(async()=>{try{l(!0);let e=await r.u.getCart();s(e.data)}catch(e){i(e instanceof Error?e.message:"Failed to fetch cart")}finally{l(!1)}},[]);return(0,a.useEffect)(()=>{c()},[c]),{cart:e,loading:t,error:n,addItem:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;try{let t=await r.u.addToCart({product_id:e,quantity:s});return t.success&&await c(),t}catch(e){throw e}},updateItem:async(e,s)=>{try{let t=await r.u.updateCartItem(e,s);return t.success&&await c(),t}catch(e){throw e}},removeItem:async e=>{try{let s=await r.u.removeCartItem(e);return s.success&&await c(),s}catch(e){throw e}},clearCart:async()=>{try{let e=await r.u.clearCart();return e.success&&await c(),e}catch(e){throw e}},refresh:c}}},9300:(e,s,t)=>{"use strict";t.d(s,{A:()=>c,AuthProvider:()=>i});var a=t(5155),r=t(2115),l=t(344);let n=(0,r.createContext)(void 0);function i(e){let{children:s}=e,[t,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{!async function(){try{if(localStorage.getItem("accessToken")){let e=await l.u.getMe();e.success?i(e.data):localStorage.removeItem("accessToken")}}catch(e){console.log("Token đ\xe3 hết hạn hoặc kh\xf4ng hợp lệ"),localStorage.removeItem("accessToken"),i(null)}finally{d(!1)}}()},[]);let o=async(e,s)=>{try{let t=await l.u.login({email:e,password:s});t.success&&i(t.data.user)}catch(e){throw e}},h=async(e,s,t)=>{try{let a=await l.u.register({full_name:e,email:s,password:t});a.success&&i(a.data.user)}catch(e){throw e}},m=async()=>{try{await l.u.logout()}catch(e){console.error("Logout error:",e)}finally{i(null),localStorage.removeItem("accessToken")}};return(0,a.jsx)(n.Provider,{value:{user:t,loading:c,login:o,register:h,logout:m,isAuthenticated:!!t},children:s})}function c(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[619,473,441,255,358],()=>e(e.s=8606)),_N_E=e.O()}]);