(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{228:(e,t,a)=>{"use strict";function s(e){return Math.round("string"==typeof e?parseFloat(e):e).toLocaleString("vi-VN")+"₫"}a.d(t,{$:()=>s})},1464:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m,dynamic:()=>u});var s=a(5155),l=a(2115),n=a(2619),i=a.n(n),r=a(344),c=a(1398),d=a(4693),o=a(228);let u="force-dynamic";function m(){var e,t,a;let[n,u]=(0,l.useState)(""),[m,h]=(0,l.useState)(""),[x,p]=(0,l.useState)(""),[g,f]=(0,l.useState)(""),[v,y]=(0,l.useState)(1);(0,l.useEffect)(()=>{let e=new URLSearchParams(window.location.search),t=e.get("category")||"",a=e.get("search")||"";u(t),h(a),f(t),p(a)},[]),(0,l.useEffect)(()=>{n&&f(n)},[n]),(0,l.useEffect)(()=>{m&&p(m)},[m]),(0,l.useEffect)(()=>{y(1)},[x,g]);let{data:j,loading:b}=function(e){let[t,a]=(0,l.useState)(null),[s,n]=(0,l.useState)(!0),[i,c]=(0,l.useState)(null);return(0,l.useEffect)(()=>{!async function(){try{n(!0);let t=await r.u.getProducts(e);a(t)}catch(e){c(e instanceof Error?e.message:"Failed to fetch products")}finally{n(!1)}}()},[null==e?void 0:e.search,null==e?void 0:e.category,null==e?void 0:e.page,null==e?void 0:e.limit]),{data:t,loading:s,error:i}}({search:x,category:g,page:v,limit:20}),{data:N}=function(){let[e,t]=(0,l.useState)(null),[a,s]=(0,l.useState)(!0),[n,i]=(0,l.useState)(null);return(0,l.useEffect)(()=>{!async function(){try{s(!0);let e=await r.u.getCategories();t(e)}catch(e){i(e instanceof Error?e.message:"Failed to fetch categories")}finally{s(!1)}}()},[]),{data:e,loading:a,error:n}}();return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,s.jsx)(c.Header,{}),(0,s.jsxs)("main",{className:"flex-1 container mx-auto px-4 py-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Sản Phẩm"}),(0,s.jsxs)("div",{className:"mb-6 flex gap-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"T\xecm kiếm sản phẩm...",className:"flex-1 px-4 py-2 border rounded-lg",value:x,onChange:e=>p(e.target.value)}),(0,s.jsxs)("select",{className:"px-4 py-2 border rounded-lg",value:g,onChange:e=>f(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"Tất cả danh mục"}),null==N||null==(e=N.data)?void 0:e.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),b?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{children:"Đang tải..."})}):(null==j||null==(t=j.data)?void 0:t.length)===0?(0,s.jsxs)("div",{className:"text-center py-20",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCE6"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Kh\xf4ng t\xecm thấy sản phẩm"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Thử t\xecm kiếm với từ kh\xf3a kh\xe1c"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-8",children:null==j||null==(a=j.data)?void 0:a.map(e=>{var t,a;return(0,s.jsx)(i(),{href:"/products/".concat(e.id),children:(0,s.jsxs)("div",{className:"glass flex flex-col rounded-2xl p-4 cursor-pointer hover:shadow-xl transition-shadow",children:[(0,s.jsxs)("div",{className:"relative mb-4 aspect-[4/3] overflow-hidden rounded-xl bg-slate-100",children:[(0,s.jsx)("img",{src:e.thumbnail_url||(null==(a=e.images)||null==(t=a.find(e=>e.is_primary))?void 0:t.image_url)||"/images/products/placeholder.jpg",alt:e.name,className:"h-full w-full object-cover transition duration-500 hover:scale-105",onError:e=>{e.target.src="/images/products/placeholder.jpg"}}),"active"===e.status&&e.stock_quantity<10&&(0,s.jsxs)("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:["C\xf2n ",e.stock_quantity]})]}),(0,s.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-primary-600",children:e.category_name||e.category||"Sản phẩm"}),(0,s.jsx)("h3",{className:"mt-1 text-lg font-semibold text-slate-900 hover:text-primary-600 transition-colors line-clamp-2 min-h-[3.5rem]",children:e.name}),(0,s.jsx)("p",{className:"mt-2 line-clamp-2 text-sm text-slate-600 min-h-[2.5rem]",children:e.description||"Sản phẩm chất lượng cao"}),(0,s.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-xl font-semibold text-primary-600",children:(0,o.$)(e.price)}),(0,s.jsx)("button",{className:"rounded-full bg-primary-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-primary-700",children:"Chi tiết"})]})]})},e.id)})}),(null==j?void 0:j.pagination)&&(0,s.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,s.jsx)("button",{className:"px-4 py-2 bg-white border rounded-lg disabled:opacity-50",disabled:1===v,onClick:()=>y(v-1),children:"Trước"}),(0,s.jsxs)("span",{className:"px-4 py-2",children:["Trang ",v," / ",j.pagination.totalPages]}),(0,s.jsx)("button",{className:"px-4 py-2 bg-white border rounded-lg disabled:opacity-50",disabled:v>=j.pagination.totalPages,onClick:()=>y(v+1),children:"Sau"})]})]})]}),(0,s.jsx)(d.w,{})]})}},1717:(e,t,a)=>{Promise.resolve().then(a.bind(a,1464))}},e=>{e.O(0,[619,398,663,441,255,358],()=>e(e.s=1717)),_N_E=e.O()}]);