(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{63:(e,t,r)=>{"use strict";var a=r(7260);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},344:(e,t,r)=>{"use strict";r.d(t,{u:()=>l});let a=r(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:4000/api";class s{getAuthToken(){return localStorage.getItem("accessToken")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{requiresAuth:r=!1,headers:a={},...s}=t,l={"Content-Type":"application/json",...a};if(r){let e=this.getAuthToken();e&&(l.Authorization="Bearer ".concat(e))}let o=await fetch("".concat(this.baseUrl).concat(e),{...s,headers:l});if(!o.ok){let e=await o.json().catch(()=>({success:!1,message:"An error occurred"}));throw 401===o.status&&localStorage.removeItem("accessToken"),Error(e.message||"HTTP ".concat(o.status))}return o.json()}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async login(e){var t;let r=await this.request("/auth/login",{method:"POST",body:JSON.stringify(e)});return(null==(t=r.data)?void 0:t.accessToken)&&localStorage.setItem("accessToken",r.data.accessToken),r}async logout(){let e=await this.request("/auth/logout",{method:"POST",requiresAuth:!0});return localStorage.removeItem("accessToken"),e}async getMe(){return this.request("/auth/me",{requiresAuth:!0})}async getProducts(e){let t=new URLSearchParams;(null==e?void 0:e.search)&&t.set("search",e.search),(null==e?void 0:e.category)&&t.set("category",e.category),(null==e?void 0:e.page)&&t.set("page",e.page.toString()),(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString());let r=t.toString();return this.request("/products".concat(r?"?".concat(r):""))}async getProduct(e){return this.request("/products/".concat(e))}async getCategories(){return this.request("/categories")}async getCategory(e){return this.request("/categories/".concat(e))}async getCart(){return this.request("/cart",{requiresAuth:!0})}async addToCart(e){return this.request("/cart",{method:"POST",body:JSON.stringify(e),requiresAuth:!0})}async updateCartItem(e,t){return this.request("/cart",{method:"PUT",body:JSON.stringify({product_id:e,quantity:t}),requiresAuth:!0})}async removeCartItem(e){return this.request("/cart/".concat(e),{method:"DELETE",requiresAuth:!0})}async clearCart(){return this.request("/cart",{method:"DELETE",requiresAuth:!0})}async createOrder(e){return this.request("/orders",{method:"POST",body:JSON.stringify(e),requiresAuth:!0})}async getOrders(){return this.request("/orders",{requiresAuth:!0})}async getOrder(e){return this.request("/orders/".concat(e),{requiresAuth:!0})}constructor(e){this.baseUrl=e}}let l=new s(a)},512:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:c=2,absoluteStrokeWidth:n,className:i="",children:u,iconNode:h,...d}=e;return(0,a.createElement)("svg",{ref:t,...o,width:s,height:s,stroke:r,strokeWidth:n?24*Number(c)/Number(s):c,className:l("lucide",i),...!u&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"},...d},[...h.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),n=(e,t)=>{let r=(0,a.forwardRef)((r,o)=>{let{className:n,...i}=r;return(0,a.createElement)(c,{ref:o,iconNode:t,className:l("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),n),...i})});return r.displayName=s(e),r}},4495:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(5155),s=r(9300),l=r(63),o=r(2115),c=r(2619),n=r.n(c);let i=(0,r(1847).A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var u=r(6617),h=r(6254),d=r(512),m=r(7726),g=r(6154),y=r(9715),p=r(4926);function f(e){var t;let{children:r}=e,{user:c,logout:f}=(0,s.A)(),x=(0,l.useRouter)();if((0,o.useEffect)(()=>{c?"admin"!==c.role&&x.push("/"):x.push("/login")},[c,x]),!c||"admin"!==c.role)return null;let A=[{icon:i,label:"Dashboard",href:"/admin/dashboard"},{icon:u.A,label:"Quản l\xfd Sản phẩm",href:"/admin/products"},{icon:h.A,label:"Quản l\xfd Danh mục",href:"/admin/categories"},{icon:d.A,label:"Quản l\xfd Đơn h\xe0ng",href:"/admin/orders"},{icon:m.A,label:"Quản l\xfd M\xe3 giảm gi\xe1",href:"/admin/coupons"},{icon:g.A,label:"Quản l\xfd Flash Sale",href:"/admin/flash-sales"},{icon:y.A,label:"Quản l\xfd Blog",href:"/admin/blogs"}];return(0,a.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,a.jsxs)("aside",{className:"w-64 bg-white shadow-lg",children:[(0,a.jsxs)("div",{className:"p-6 border-b",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-primary-600",children:"Admin Panel"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Fishing Shop"})]}),(0,a.jsxs)("nav",{className:"p-4",children:[A.map(e=>(0,a.jsxs)(n(),{href:e.href,className:"flex items-center gap-3 px-4 py-3 text-gray-700 rounded-lg hover:bg-primary-50 hover:text-primary-600 transition-colors mb-1",children:[(0,a.jsx)(e.icon,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:e.label})]},e.href)),(0,a.jsxs)("button",{onClick:f,className:"flex items-center gap-3 px-4 py-3 text-red-600 rounded-lg hover:bg-red-50 transition-colors mt-4 w-full",children:[(0,a.jsx)(p.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:"Đăng xuất"})]})]}),(0,a.jsx)("div",{className:"absolute bottom-0 w-64 p-4 border-t bg-white",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary-600 flex items-center justify-center text-white font-semibold",children:null==(t=c.fullName)?void 0:t.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:c.fullName}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:c.email})]})]})})]}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto",children:(0,a.jsx)("div",{className:"p-8",children:r})})]})}},4926:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},5879:(e,t,r)=>{Promise.resolve().then(r.bind(r,4495))},6154:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},6254:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("folder-tree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]])},6617:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},7726:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},9300:(e,t,r)=>{"use strict";r.d(t,{A:()=>n,AuthProvider:()=>c});var a=r(5155),s=r(2115),l=r(344);let o=(0,s.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,s.useState)(null),[n,i]=(0,s.useState)(!0);(0,s.useEffect)(()=>{!async function(){try{if(localStorage.getItem("accessToken")){let e=await l.u.getMe();e.success?c(e.data):localStorage.removeItem("accessToken")}}catch(e){console.log("Token đ\xe3 hết hạn hoặc kh\xf4ng hợp lệ"),localStorage.removeItem("accessToken"),c(null)}finally{i(!1)}}()},[]);let u=async(e,t)=>{try{let r=await l.u.login({email:e,password:t});r.success&&c(r.data.user)}catch(e){throw e}},h=async(e,t,r)=>{try{let a=await l.u.register({full_name:e,email:t,password:r});a.success&&c(a.data.user)}catch(e){throw e}},d=async()=>{try{await l.u.logout()}catch(e){console.error("Logout error:",e)}finally{c(null),localStorage.removeItem("accessToken")}};return(0,a.jsx)(o.Provider,{value:{user:r,loading:n,login:u,register:h,logout:d,isAuthenticated:!!r},children:t})}function n(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9715:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=5879)),_N_E=e.O()}]);